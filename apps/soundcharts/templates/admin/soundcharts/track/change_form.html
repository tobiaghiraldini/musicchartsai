{% extends "admin/change_form.html" %}
{% load i18n admin_urls static %}

{% block extra_actions %}
  {% if show_fetch_metadata_button %}

    <div class="form-group mt-2">
      <input type="submit" value="{% trans 'Fetch Metadata from API' %}" name="_fetch_metadata" class="btn btn-info w-100">
    </div>
  {% endif %}
  
  {% if show_fetch_audience_button %}
      <div class="form-group flex-row gap-2 mb-2">
        <label for="platform_select">Platform:
        <select name="platform" id="platform_select" style="padding: 5px;">
          <option value="spotify">Spotify</option>
          {% for slug, name in available_platforms %}
            {% if slug != 'spotify' %}
              <option value="{{ slug }}">{{ name }}</option>
            {% endif %}
          {% endfor %}
        </select>
        </label>
        <label style="margin-left: 15px;">
          <input type="checkbox" name="force_refresh" style="margin-right: 5px;"> Force refresh existing data
        </label>
      </div>
      <input type="submit" value="{% trans 'Fetch Audience Data from API' %}" name="_fetch_audience" class="btn btn-info w-100">
  {% endif %}
  
  {{ block.super }}
{% endblock %}

{% block extrahead %}
{{ block.super }}
<link rel="stylesheet" type="text/css" href="{% static "assets/admin-import.css" %}">
<script src="{% static "assets/track-admin-alerts.js" %}"></script>
<style>
.submit-row input[name="_fetch_metadata"] {
    background: #28a745 !important;
    color: white !important;
    border: 1px solid #28a745 !important;
}
.submit-row input[name="_fetch_metadata"]:hover {
    background: #218838 !important;
    border-color: #1e7e34 !important;
}
.submit-row input[name="_fetch_audience"] {
    background: #007bff !important;
    color: white !important;
    border: 1px solid #007bff !important;
}
.submit-row input[name="_fetch_audience"]:hover {
    background: #0056b3 !important;
    border-color: #004085 !important;
}
</style>
{% endblock %}
